<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue 2 Mastery Flashcards</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .backface-hidden {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        .preserve-3d {
            transform-style: preserve-3d;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Custom Lucide Icon Component for CDN compatibility
        const Icon = ({ name, size = 24, className = "" }) => {
            useEffect(() => {
                lucide.createIcons();
            }, []);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [audioEnabled, setAudioEnabled] = React.useState(true);
            const [showCodeModal, setShowCodeModal] = React.useState(false);
            const audioCtx = React.useRef(null);

            const originalCode = `import Vue from 'vue';

const Article = {
template: \`
<div>
    <h2>Title: {{title}}</h2>
    <p>{{ body }}</p>
    <ul>
        <li v-for="todo in todos">
            {{ todo.text }}
        </li>
    </ul>
</div>
\`,
data: function () {
return {
'body': 'Body 1'
}
},
props: ['title', 'todos'],
};

const app = new Vue({
el: '#app',
data: function () {
return {
'todos': [{ 'id': 1, 'text': 'Todo 1', 'completed': false }],
'title': 'Testing Title'
}
},
template: \`
<article>
    <div>Vue Main App</div>
    <Article :title="title" :todos="todos" />
</article>
\`,
components: {
Article
}
});`;

            const highlightCode = (code) => {
                return code
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/\b(const|let|var|import|from|new|return|function|export|default)\b/g, '<span class="text-pink-400">$1</span>')
                    .replace(/\b(Vue|Article|app)\b/g, '<span class="text-yellow-200">$1</span>')
                    .replace(/('.*?'|".*?"|`[\s\S]*?`)/g, '<span class="text-emerald-400">$1</span>')
                    .replace(/\b(template|data|props|el|components|v-for|id|text|completed|title|todos)\b/g, '<span class="text-blue-300">$1</span>')
                    .replace(/\/\/.*/g, '<span class="text-slate-500">$0</span>');
            };

            const playSound = (type) => {
                if (!audioEnabled) return;
                if (!audioCtx.current) {
                    audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
                }
                const ctx = audioCtx.current;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                const now = ctx.currentTime;

                switch (type) {
                    case 'next':
                        osc.type = 'sine';
                        osc.frequency.setValueAtTime(440, now);
                        osc.frequency.exponentialRampToValueAtTime(880, now + 0.1);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                        osc.start(now);
                        osc.stop(now + 0.1);
                        break;
                    case 'correct':
                        osc.type = 'triangle';
                        osc.frequency.setValueAtTime(523.25, now);
                        osc.frequency.exponentialRampToValueAtTime(659.25, now + 0.1);
                        osc.frequency.exponentialRampToValueAtTime(783.99, now + 0.2);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                        osc.start(now);
                        osc.stop(now + 0.3);
                        break;
                    case 'incorrect':
                        osc.type = 'sawtooth';
                        osc.frequency.setValueAtTime(220, now);
                        osc.frequency.linearRampToValueAtTime(110, now + 0.2);
                        gain.gain.setValueAtTime(0.05, now);
                        gain.gain.linearRampToValueAtTime(0.01, now + 0.2);
                        osc.start(now);
                        osc.stop(now + 0.2);
                        break;
                    case 'finish':
                        [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
                            const o = ctx.createOscillator();
                            const g = ctx.createGain();
                            o.connect(g);
                            g.connect(ctx.destination);
                            o.frequency.setValueAtTime(freq, now + (i * 0.1));
                            g.gain.setValueAtTime(0.1, now + (i * 0.1));
                            g.gain.exponentialRampToValueAtTime(0.01, now + (i * 0.1) + 0.4);
                            o.start(now + (i * 0.1));
                            o.stop(now + (i * 0.1) + 0.4);
                        });
                        break;
                }
            };

            const questions = [
                {
                    question: "In the code, how is the 'Article' component registered within the main Vue instance?",
                    answer: "It is registered locally using the 'components' property: components: { Article }."
                },
                {
                    question: "What directive is used in the Article template to render the list of todos?",
                    answer: "The 'v-for' directive: v-for=\"todo in todos\"."
                },
                {
                    question: "Why is 'data' defined as a function in the Article component instead of an object?",
                    answer: "In Vue components, data must be a function so that each instance of the component maintains a private, independent copy of the returned data object."
                },
                {
                    question: "How are the 'title' and 'todos' passed from the parent app to the Article component?",
                    answer: "They are passed as props using the 'v-bind' shorthand (:title=\"title\" and :todos=\"todos\")."
                },
                {
                    question: "What does the 'el: \"#app\"' property signify in the main Vue instance?",
                    answer: "It specifies the DOM element that the Vue instance will 'mount' to or manage."
                },
                {
                    question: "In the Article component's template, how is the 'body' property rendered?",
                    answer: "Using mustache syntax (double curly braces): {{ body }}."
                },
                {
                    question: "What is the result of the expression 'todo.text' inside the v-for loop?",
                    answer: "It renders the 'text' property of each individual todo object in the todos array."
                },
                {
                    question: "Does the Article component have access to the main app's 'title' data property directly?",
                    answer: "No, it only has access to it because it is explicitly passed down via props."
                },
                {
                    question: "What happens if you remove 'props: [\"title\", \"todos\"]' from the Article component definition?",
                    answer: "The component will not recognize those attributes as props, and the values will not be available on the component instance for rendering."
                },
                {
                    question: "In the main app's template, why is the tag <Article /> used instead of <div>?",
                    answer: "Because 'Article' is a custom component defined and registered in the components object."
                },
                {
                    question: "What is the initial value of the 'body' property in the Article component?",
                    answer: "'Body 1'."
                },
                {
                    question: "The code uses 'import Vue from \"vue\"'. What version of Vue syntax style is this typically associated with?",
                    answer: "Vue 2 (specifically using the Options API and ES modules)."
                },
                {
                    question: "What is the structure of the 'todos' array in the main application's data?",
                    answer: "An array containing one object: [{ 'id': 1, 'text': 'Todo 1', 'completed': false }]."
                },
                {
                    question: "If 'todos' in the main app changes, will the Article component update automatically?",
                    answer: "Yes, Vue's reactivity system ensures that changes to parent data passed as props automatically trigger updates in the child component."
                },
                {
                    question: "Can the Article component modify the 'title' prop directly?",
                    answer: "Technically it could, but Vue 2 will emit a warning because props should be treated as 'one-way down' binding (immutable from the child's perspective)."
                }
            ];

            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [showAnswer, setShowAnswer] = React.useState(false);
            const [completed, setCompleted] = React.useState([]);

            const toggleAnswer = () => {
                playSound('next');
                setShowAnswer(!showAnswer);
            };

            const nextCard = () => {
                playSound('next');
                setShowAnswer(false);
                setCurrentIndex((prev) => (prev + 1) % questions.length);
            };

            const prevCard = () => {
                playSound('next');
                setShowAnswer(false);
                setCurrentIndex((prev) => (prev - 1 + questions.length) % questions.length);
            };

            const markCompleted = () => {
                if (!completed.includes(currentIndex)) {
                    const newCompleted = [...completed, currentIndex];
                    setCompleted(newCompleted);
                    if (newCompleted.length === questions.length) {
                        playSound('finish');
                    } else {
                        playSound('correct');
                    }
                } else {
                    playSound('correct');
                }
                nextCard();
            };

            const markIncorrect = () => {
                playSound('incorrect');
                nextCard();
            };

            const reset = () => {
                playSound('incorrect');
                setCurrentIndex(0);
                setShowAnswer(false);
                setCompleted([]);
            };

            const progress = (completed.length / questions.length) * 100;

            useEffect(() => {
                lucide.createIcons();
            }, [currentIndex, showAnswer, showCodeModal]);

            return (
                <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4 font-sans text-slate-800">
                    <div className="w-full max-w-xl">
                        {/* Header */}
                        <div className="mb-8 text-center relative flex justify-center items-center">
                            <div className="absolute left-0 top-0 flex gap-1">
                                <button onClick={() => setShowCodeModal(true)}
                                    className="p-2 text-slate-400 hover:text-indigo-600 transition-colors"
                                    title="View Source Code"
                                >
                                    <Icon name="code" size={20} />
                                </button>
                            </div>

                            <div>
                                <h1 className="text-3xl font-bold text-indigo-700 mb-2">Vue 2 Mastery</h1>
                                <p className="text-slate-500">Test your knowledge with sound feedback</p>
                            </div>

                            <button onClick={() => setAudioEnabled(!audioEnabled)}
                                className="absolute right-0 top-0 p-2 text-slate-400 hover:text-indigo-600 transition-colors"
                                title={audioEnabled ? "Mute sounds" : "Unmute sounds"}
                            >
                                {audioEnabled ?
                                    <Icon name="volume-2" size={20} /> :
                                    <Icon name="volume-x" size={20} />}
                            </button>
                        </div>

                        {/* Progress Bar */}
                        <div className="mb-6">
                            <div className="flex justify-between text-sm mb-1 px-1">
                                <span className="font-medium text-indigo-600">Mastery Progress</span>
                                <span>{completed.length} / {questions.length}</span>
                            </div>
                            <div className="w-full bg-slate-200 h-2 rounded-full overflow-hidden">
                                <div className="bg-indigo-500 h-full transition-all duration-500 ease-out" style={{ width: `${progress}%` }}></div>
                            </div>
                        </div>

                        {/* Flashcard */}
                        <div onClick={toggleAnswer} className={`relative h-80 w-full cursor-pointer transition-all duration-500 preserve-3d group ${showAnswer ? 'rotate-y-180' : ''}`} style={{ perspective: '1000px' }}>
                            <div className={`absolute inset-0 w-full h-full backface-hidden rounded-3xl shadow-xl border border-slate-200 bg-white p-8 flex flex-col items-center justify-center text-center transition-opacity duration-300 ${showAnswer ? 'opacity-0' : 'opacity-100'}`}>
                                <div className="absolute top-4 left-6 text-xs font-bold uppercase tracking-wider text-slate-400">Question {currentIndex + 1}</div>
                                <Icon name="help-circle" size={48} className="text-indigo-200 mb-4" />
                                <h2 className="text-xl md:text-2xl font-semibold leading-snug px-4">
                                    {questions[currentIndex].question}
                                </h2>
                                <div className="mt-8 text-sm text-slate-400 italic">Click to reveal answer</div>
                            </div>

                            <div className={`absolute inset-0 w-full h-full backface-hidden rounded-3xl shadow-xl border border-indigo-100 bg-indigo-50 p-8 flex flex-col items-center justify-center text-center rotate-y-180 transition-opacity duration-300 ${showAnswer ? 'opacity-100' : 'opacity-0'}`} style={{ transform: 'rotateY(180deg)' }}>
                                <div className="absolute top-4 left-6 text-xs font-bold uppercase tracking-wider text-indigo-400">Answer</div>
                                <Icon name="check-circle-2" size={48} className="text-indigo-400 mb-4" />
                                <p className="text-lg md:text-xl text-indigo-900 font-medium px-4">
                                    {questions[currentIndex].answer}
                                </p>
                                <div className="mt-8 text-sm text-indigo-400 italic">Click to see question again</div>
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="mt-10 flex flex-col items-center gap-6">
                            <div className="flex items-center justify-between w-full gap-4">
                                <button onClick={(e) => { e.stopPropagation(); prevCard(); }}
                                    className="p-3 rounded-full bg-white shadow-md border border-slate-200 hover:bg-slate-50 transition-colors"
                                    title="Previous">
                                    <Icon name="chevron-left" size={24} className="text-slate-600" />
                                </button>

                                <div className="flex-1 flex gap-3">
                                    {showAnswer && (
                                        <button onClick={(e) => { e.stopPropagation(); markIncorrect(); }}
                                            className="flex-1 px-4 py-3 rounded-xl bg-white border border-rose-200 text-rose-600 font-medium hover:bg-rose-50 flex items-center justify-center gap-2 shadow-sm transition-all transform active:scale-95">
                                            <Icon name="x-circle" size={16} />
                                            Study
                                        </button>
                                    )}

                                    <button onClick={(e) => { e.stopPropagation(); showAnswer ? markCompleted() : toggleAnswer(); }} className={`flex-[2] py-3 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg transition-all transform active:scale-95 ${showAnswer ? "bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-200" : "bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-200"}`}>
                                        {showAnswer ? (
                                            <>
                                                <Icon name="check-circle-2" size={20} />
                                                Got it! / Next
                                            </>
                                        ) : (
                                            <>
                                                <Icon name="eye" size={20} />
                                                Reveal Answer
                                            </>
                                        )}
                                    </button>
                                </div>

                                <button onClick={(e) => { e.stopPropagation(); nextCard(); }}
                                    className="p-3 rounded-full bg-white shadow-md border border-slate-200 hover:bg-slate-50 transition-colors"
                                    title="Next">
                                    <Icon name="chevron-right" size={24} className="text-slate-600" />
                                </button>
                            </div>

                            <button onClick={reset}
                                className="text-slate-400 hover:text-slate-600 flex items-center gap-2 text-sm font-medium transition-colors">
                                <Icon name="rotate-ccw" size={16} />
                                Reset Progress
                            </button>
                        </div>
                    </div>

                    {/* Code Modal */}
                    {showCodeModal && (
                        <div className="fixed inset-0 z-50 bg-slate-900/95 flex flex-col p-4 md:p-8 overflow-hidden">
                            <div className="flex justify-between items-center mb-4 border-b border-slate-700 pb-4">
                                <div className="flex items-center gap-3">
                                    <Icon name="code" className="text-indigo-400" />
                                    <h3 className="text-xl font-bold text-white">Original Vue 2 Source</h3>
                                </div>
                                <button onClick={() => setShowCodeModal(false)}
                                    className="p-2 bg-slate-800 hover:bg-slate-700 rounded-full text-slate-300 transition-colors"
                                >
                                    <Icon name="x" size={24} />
                                </button>
                            </div>

                            <div className="flex-1 bg-slate-950 rounded-xl border border-slate-800 p-4 overflow-auto font-mono text-sm md:text-base leading-relaxed">
                                <pre className="text-slate-300 whitespace-pre-wrap md:whitespace-pre" dangerouslySetInnerHTML={{ __html: highlightCode(originalCode) }} />
                            </div>

                            <div className="mt-4 text-center">
                                <button onClick={() => setShowCodeModal(false)}
                                    className="px-8 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors"
                                >
                                    Back to Study
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>